"use strict";(function(){function e(e,o){var t=e.split(o);return e=e.substr(t[0].length+o.length),[t[0],e]}function o(e,o,t){for(var a,n=0;n<e.length;n++)a=new RegExp(e[n],"g"),t=t.replace(a,o[n]);return t}async function t(e,o="[INFO]",t="white-text"){var a=$("#console"),n=$("<span>");n.attr("class",t),""!=o&&(o+=" "),n.html(o+e),a.append(n),a.append("<br>"),a.scrollTop(a[0].scrollHeight-a.height())}async function a(o=!0){$("#updateCommands").prop("disabled",!0),o&&t(T.updatingCommands,"[INFO]","yellow-text"),x={};var a=$("#commands").val(),n=a.split(/(?<!\\); *$/gm);for(var r of n){"\n"===r.charAt(0)&&(r=r.substr(1));var i=r.replace(/^(\$[A-Za-z0-9_]+) = (.+?)$/s,function(e,o,t){return C[o]=t,""});if(""!==i&&-1!==r.indexOf(" > ")){var s=e(r," > ");s[1]=s[1].replace(/\$[A-Za-z0-9_]+/g,function(e){return e in C?C[e]:e});var l=0==s[1].indexOf("photo "),d=!1,c=s[1].split(/\n/g),p=c[c.length-1];if(l){s[1]=e(s[1],"photo ")[1],console.log(s[1]);var u="";-1!==s[1].indexOf("\n")&&(""!==(u=e(s[1],"\n")[1])&&-1===u.indexOf("[[[")&&-1===u.indexOf("(((")||u!==p)?(s[1]=e(s[1],u)[0],console.log(u,s[1]),u=u.substring(0,u.lastIndexOf("\n"))):u=""}else 0===s[1].indexOf("sticker ")&&(s[1]=e(s[1],"sticker ")[1],d=!0);var m=null;if(0===p.indexOf("[[[")){m={inline_keyboard:[]},N&&t("Building inline keyboard","[DEBUG]");for(var g=/\[?(,? ?\[?(,? ?\[(.*?) - (.*?)\]?)\])\]?/g,h=0,b=0;v=g.exec(p);){if(f=0===v[4].indexOf("https://")||0===v[4].indexOf("http://")||0===v[4].indexOf("tg://")?{text:v[3],url:v[4]}:{text:v[3],callback_data:v[4]},N&&t("Pushing <code>"+JSON.stringify(f)+"</code> into the keyboard array.","[DEBUG]"),b++,b>1&&g.lastIndex<b)return t(T.regexpError,T.critError,"red-text"),void alert(T.critError+" "+T.regexpError);0===v[1].indexOf(", [[")||0===v[1].indexOf(",[[")||0===v[1].indexOf("[[")?(m.inline_keyboard.push([f]),h++):m.inline_keyboard[h-1].push(f)}N&&t("Inline keyboard built.","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}else if(0===p.indexOf("(((")){var h=0;m={keyboard:[]},N&&t("Building traditional keyboard","[DEBUG]");for(g=/\(?(,? ?\(?(,? ?\((.*?)\)?)\))\)?/g;v=g.exec(p);){var f={text:v[3]};N&&t("Pushing <code>"+JSON.stringify(f)+"</code> into the keyboard array.","[DEBUG]"),0===v[1].indexOf(", ((")||0===v[1].indexOf(",((")||0===v[1].indexOf("((")?(m.keyboard.push([f]),h++):m.keyboard[h-1].push(f)}(p.endsWith(",true")||p.endsWith(", true"))&&(m.one_time_keyboard=!0,N&&t("One time keyboard detected")),N&&t("Keyboard built.","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}else if(0===p.indexOf("()")){var v;m={remove_keyboard:!0},N&&t("Remove keyboard put into reply_markup","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}h=l?[s[1],"photo",m,u]:d?[s[1],"sticker",m]:[s[1],"text",m],s[0]in x?x[s[0]].push(h):x[s[0]]=[h]}}localStorage.setItem("commands",$("#commands").val()),o&&t(T.updatedCommands,"[INFO]","green-text"),$("#updateCommands").prop("disabled",!1)}function n(e){return $("<div>").text(e).html()}async function r(){$.ajax({url:"https://pato05mc.alwaysdata.net/protectedtransfer.php",async:!0,method:"POST",data:{d:document.location.hash?document.location.href.substr(0,document.location.href.length-document.location.hash.length):document.location.href},dataType:"text",success:function(e){k=e,-1===["16b7c5ece2d299ac3338274a5815732fef45350617cb05252093f300ffa54507","60174fef36538ee59c237097f49587e7b0a4e259d0b92c3059ddc4d4560a4f1e","f591e7160f7aabb03792e165a1d7c45fa9bd2258e32a6d851d5f96fc170332b5","4ba274358b68bb155f0631053102ee0c6b8fd23cb0875ffaa34a5b9020e88d47"].indexOf(e)&&$(".card-panel").prepend($("<h5>").html('<b>ATTENTION</b>: You are not using the real EasyJSBot. THE ONLY REAL EASYJSBOT IS <a href="https://github.pato05mc.tk/tg-js-bot">THIS</a>.'))},error:function(){alert("Please, reload this page.")}})}async function i(){v("getUpdates",{offset:S},async function(e){var a={};if("stop"==I)return $("#offlineWebhook").prop("checked")?(t(T.settingWebhook,"[INFO]","yellow-text"),v("setWebhook",{url:"https://pato05mc.alwaysdata.net/offline.php?token="+E+"&lang="+G+"&d="+k},async function(){$("#startBot").prop("disabled",!1),t(T.botStopped,"[INFO]","blue-text")},async function(e){t(T.errorWebhook+e.responseText,T.logError,"red-text")})):($("#startBot").prop("disabled",!1),t(T.botStopped,"[INFO]","blue-text")),I=0,!0;setTimeout(i,$("#ufUpdAnalyzer").prop("checked")?0:500),e.result!==[]&&e.result&&e.result.length>0&&(N&&(t("Received update "+n(JSON.stringify(e)),"[DEBUG]"),D=(new Date).getTime(),t("Start Time: "+D,"[DEBUG]")),a=e.result[0],S=a.update_id,l(a),S++),0==I&&(localStorage.setItem("botToken",$("#token").val()),t(T.botStarted,"[INFO]","blue-text"),t(T.helpCmd),$("#stopBot").prop("disabled",!1),v("getMe",{},async function(e){y=e.result,O=y.username;var a=["{BOTNAME}","{TMEBOTUSERNAME}"],r=[n(y.first_name),'<a href="tg://resolve?domain='+O+'">@'+O+"</a>"];t(o(a,r,T.botInfo))}),I=1)},async function(e){var o,a=e.responseText,n=JSON.parse(e.responseText),r="Errore sconosciuto";(403==n.error_code||404==n.error_code?r=T.wrongToken:409==n.error_code&&(r=T.conflict),409===n.error_code&&"Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first"===n.description)?v("getWebhookInfo",{},async function(e){(0===e.result.url.indexOf("https://pato05mc.alwaysdata.net/offline.php")||confirm("C'è un webhook già settato che non punta alla pagina offline. Vuoi rimuoverlo?"))&&(v("deleteWebhook"),o=!0,I=0,$("#stopBot").prop("disabled",!1),$("#startBot").prop("disabled",!0),i())}):t(T.connectionError+a+"<br />"+r,T.logError,"red-text");I=0,o||($("#stopBot").prop("disabled",!0),$("#startBot").prop("disabled",!1))})}async function s(){if(""!=E&&E){if(N){t("Updating bot settings...","[DEBUG]");var e=(new Date).getTime()}localStorage.setItem("botSettings",JSON.stringify({parseMode:$("#parseMode").val(),wpPreview:$("#wpPreview").val(),autoStart:$("#autoStart").prop("checked"),logAllMsg:$("#logAllMsg").prop("checked"),ufUpdAnalyzer:$("#ufUpdAnalyzer").prop("checked"),selectedChatId:_,knownChatIDs:JSON.stringify(B),sendAll:$("#sendAll").prop("checked"),offlineWebhook:$("#offlineWebhook").prop("checked")})),N&&t("Updated bot settings<br />Response time: "+((new Date).getTime()-e)+"ms","[DEBUG]")}}async function l(e){var a,r,i,s,l,d,u="",y=0,k="",S=!1,w=0;if(N&&t("Analysing update: "+n(JSON.stringify(e)),"[DEBUG]"),"message"in e){if(R=e.message,!("chat"in R))return t(T.messageNotSupported,"[WARNING]","yellow-text"),!1;if(y=R.chat.id,"title"in R.chat&&(i=R.chat.title,S=!0),"from"in R&&("first_name"in R.from?(l=R.from.first_name,k=l):l="","last_name"in R.from?(s=R.from.last_name,k+=" "+s):s="",w="id"in R.from?R.from.id:0),r=void 0!==i?i:k,"text"in R)u=R.text,a="/"==u.charAt(0)&&-1!==u.indexOf("@"+O)?u.replace("@"+O,""):u;else if("photo"in R){var C=R.photo[R.photo.length-1].file_id,I=R.caption;(_==y||$("#logAllMsg").prop("checked"))&&v("getFile",{file_id:C},async function(e){var o="https://api.telegram.org/file/bot"+E+"/"+e.result.file_path;t('<span class="sentImg"><img src="'+o+'"><br>'+(I||"")+"</span>","["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")}),u=""}else if("video"in R){I=R.caption;var M=R.video.file_id;(_==y||$("#logAllMsg").prop("checked"))&&v("getFile",{file_id:M},async function(e){var o="https://api.telegram.org/file/bot"+E+"/"+e.result.file_path;t('<span class="sentImg"><video src="'+o+'" controls></video><br>'+(I||"")+"</span>","["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")}),u=""}else if("sticker"in R){M=R.sticker.file_id;(_==y||$("#logAllMsg").prop("checked"))&&v("getFile",{file_id:M},async function(e){var o="https://api.telegram.org/file/bot"+E+"/"+e.result.file_path;t('Sticker: <span class="sentImg"><img class="sticker" src="'+o+'"><br>'+(I||"")+"</span>","["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")}),u=""}else if("voice"in R){I=R.caption,M=R.voice.file_id;(_==y||$("#logAllMsg").prop("checked"))&&v("getFile",{file_id:M},async function(e){var o="https://api.telegram.org/file/bot"+E+"/"+e.result.file_path;t('<span class="sentImg"><audio src="'+o+'" controls></audio><br>'+(I||"")+"</span>","["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")}),u=""}else if("video_note"in R){I=R.caption,M=R.video_note.file_id;(_==y||$("#logAllMsg").prop("checked"))&&v("getFile",{file_id:M},async function(e){var o="https://api.telegram.org/file/bot"+E+"/"+e.result.file_path;t('<span class="sentImg"><video class="video_note" src="'+o+'" controls></video><br>'+(I||"")+"</span>","["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")}),u=""}}else if("callback_query"in e){var A=e.callback_query,U=A.data,R=A.message,H=A.id,G=A.from;w=G.id;"first_name"in G&&(l=G.first_name),k=l,"last_name"in G&&(s=G.last_name,k+=" "+s),y=A.message.chat.id,"chat"in R&&(y=R.chat.id,"title"in R.chat&&(i=R.chat.title,S=!0)),r=void 0!==i?i:k,a=U,u=U,c(H),N&&t("Callback Data: "+U,"["+n(k)+"]",_==w?"yellow-text":"white-text")}else u=T.messageNotSupported;_!=y&&!$("#logAllMsg").prop("checked")||void 0!==U||u&&t(n(u),"["+(S?n(i)+": ":"")+n(k)+"]",_==y?"yellow-text":"white-text"),B[y]=r,d=new Date((new Date).getTime()-D);var P=["{CHATID}","{USERID}","{CHATTITLE}","{NAME}","{FIRSTNAME}","{LASTNAME}","{MSGTEXT}","{HTMLESCAPEDMSGTEXT}","{STARTTIME}"],L=[y,w,"HTML"==$("#parseMode").val()?n(r):r,"HTML"==$("#parseMode").val()?n(k):k,"HTML"==$("#parseMode").val()?n(l):l,"HTML"==$("#parseMode").val()?n(s):s,u,n(u),d.getHours()-1+T.hours+d.getMinutes()+T.minutes+d.getSeconds()+T.seconds];if("/fileid"==I&&m(y,"FileID: <code>"+C+"</code>",null,!1,"HTML"),"/fileid"===a&&"reply_to_message"in R){var z=R.reply_to_message;if("photo"in z)M=z.photo[R.photo.length-1].file_id;else if("video"in z)M=z.video.file_id;else if("voice"in z)M=z.voice.file_id;else if("video_note"in z)M=z.video_note.file_id;else if("audio"in z)M=z.audio.file_id;else if("document"in z)M=z.document.file_id;else if("sticker"in z)M=z.sticker.file_id;else M="Not available or not compatible";m(y,"File ID: <code>"+M+"</code>",null,!1,"HTML")}if(a in x&&""!=a)for(var J of x[a]){var W=null;if($("#sendAll").prop("checked")||(J=x[a][Math.floor(Math.random()*x[a].length)],W=x[a][0][2]),"text"==J[1]){var F=o(P,L,J[0]);N&&t("Text to send: "+n(F),"[DEBUG]"),2 in J&&J[2]&&(W=J[2],W=JSON.stringify(W),W=o(P,L,W),W=JSON.parse(W)),void 0!==U?$.isEmptyObject(W)||"inline_keyboard"in W?"photo"in R?(N&&t("Message to edit is a photo. Incompatible types photo, text. Deleting previous message and sending a new one.","[DEBUG]"),p(y,R.message_id),m(y,F,W)):"sticker"in R?(N&&t("Message to edit is a sticker. Incompatible types sticker, text. Deleting previous message and sending a new one.","[DEBUG]"),p(y,R.message_id),m(y,F,W)):g(y,F,R.message_id,W):(N&&t("reply_markup is not an inline keyboard and request has been sent by a button, sending a new message and deleting the existing one.","[DEBUG]"),p(y,R.message_id),m(y,F,W)):m(y,F,W)}else if("photo"==J[1]){I="";var q=null;3 in J&&(I=o(P,L,J[3]),N&&t("Caption to send: "+n(I),"[DEBUG]")),2 in J&&J[2]&&(W=J[2],W=JSON.stringify(W),W=o(P,L,W),W=JSON.parse(W)),void 0!==U?$.isEmptyObject(W)||"inline_keyboard"in W?"text"in R?(N&&t("Message to edit is a text. Incompatible types photo, text. Deleting previous message and sending a new one.","[DEBUG]"),p(y,R.message_id),b(y,J[0],I,W)):"sticker"in R?(N&&t("Message to edit is a sticker. Incompatible types photo, sticker. Deleting previous message and sending a new one.","[DEBUG]"),p(y,R.message_id),b(y,J[0],I,W)):(q={type:"photo",media:J[0],caption:I},h(y,R.message_id,q,W)):(N&&t("reply_markup is not an inline keyboard and request has been sent by a button, sending a new message and deleting the existing one.","[DEBUG]"),p(y,R.message_id),b(y,J[0],I,W)):b(y,J[0],I,W)}else"sticker"==J[1]&&(2 in J&&J[2]&&(W=J[2],W=JSON.stringify(W),W=o(P,L,W),W=JSON.parse(W)),void 0!==U&&(p(y,R.message_id),N&&t("Can't edit sticker.","[DEBUG]")),f(y,J[0],W));if(!$("#sendAll").prop("checked"))break}if("any"in x&&void 0===U)for(var J of x.any){if($("#sendAll").prop("checked")||(J=x.any[Math.floor(Math.random()*x.any.length)]),"text"==J[1]){F=o(P,L,J[0]);N&&t("Text to send: "+n(F),"[DEBUG]");W={};2 in J&&(W=J[2]),m(y,F,W)}else if("photo"==J[1]){I="";2 in J&&(I=o(P,L,J[2]),N&&t("Caption to send: "+n(I),"[DEBUG]")),b(y,J[0],I)}if(!$("#sendAll").prop("checked"))break}N&&t("Response Time: "+((new Date).getTime()-D)+"ms","[DEBUG]")}async function d(o){if(""!=E&&E&&1==I)switch(e(o," ")[0]){case"/help":t(T.helpConsoleCommands,"");break;case"/select":var a=e(o," ");if(1 in a&&a[1])_=a[1],t(0==_?T.removedChatIdSelection:T.selected+_+"!","[INFO]","green-text"),s();else if($.isEmptyObject(B))t(T.noKnownChats,T.logError,"red-text");else{var r="";for(var i in B)r+='<option value="'+i+'"'+(i==_?" selected":"")+">"+n(B[i])+"</option>";$("#selectChatId").html(r).formSelect(),$("#selectChatIdModal").modal("open")}break;default:"/"==o.charAt(0)?t(T.unknownCommand,T.logError,"red-text"):0!=_?(o=o.replace(/\\n/g,"\n"),o.replace(new RegExp(" ","g"),"").length>0?o.length<=4096?m(_,o,{},!0):t(T.messageTooLong,T.logError,"red-text"):t(T.emptyMessage,T.logError,"red-text")):t(T.noChatSelected,T.logError,"red-text")}else t(T.consoleBotNotStarted,T.logError,"red-text")}async function c(e,o,t){var a={callback_query_id:e,text:o,show_alert:t};v("answerCallbackQuery",a)}async function p(e,o){var a={chat_id:e,message_id:o};v("deleteMessage",a,async function(){},async function(e){var a=e.responseText;t(T.deleteMessageError+o+": "+a,T.logError,"red-text")},!0)}async function u(e,o){var t={chat_id:e,action:o};v("sendChatAction",t)}async function m(e,o,a=null,n=!1,r=!1,i=!1){if(r||(r=$("#parseMode").val()),i||(i=$("#wpPreview").val()),null!=e&&""!=e||e){var s={chat_id:e,text:o,parse_mode:r,disable_web_page_preview:i};return a&&(s.reply_markup=JSON.stringify(a)),v("sendMessage",s,async function(o){n&&t(o.result.text,"["+T.messageSent+(e in B?B[e]:e)+"]","green-text")},async function(e){var o=e.responseText;t(T.sendMessageError+o,T.logError,"red-text")},!0),!0}return!1}async function g(e,o,a,n=null,r=!1,i=!1,s=!1){if(i||(i=$("#parseMode").val()),s||(s=$("#wpPreview").val()),!(null!=e&&""!=e||e))return!1;var l={chat_id:e,text:o,parse_mode:i,message_id:a,disable_web_page_preview:s};n&&(l.reply_markup=JSON.stringify(n)),v("editMessageText",l,async function(){},async function(e){var o=e.responseText;t(T.sendMessageError+o,T.logError,"red-text")},!0)}async function h(e,o,a,n=null,r=!1){if(r||(r=$("#parseMode").val()),!(null!=e&&""!=e||e))return!1;"parse_mode"in a||(a.parse_mode=r);var i={chat_id:e,message_id:o,media:JSON.stringify(a)};n&&(i.reply_markup=JSON.stringify(n)),v("editMessageMedia",i,async function(){},async function(e){var o=e.responseText;t(T.sendMessageError+o,T.logError,"red-text")},!0)}async function b(e,o,a="",n=null,r=!1,i=!1,s=!1){i||(i=$("#parseMode").val()),s||(s=$("#wpPreview").val());var l={chat_id:e,photo:o,caption:a,parse_mode:i,disable_web_page_preview:s};n&&(l.reply_markup=JSON.stringify(n)),v("sendPhoto",l,async function(a){r&&v("getFile",{file_id:o},async function(o){var a="https://api.telegram.org/file/bot"+E+"/"+o.result.file_path;t('<span class="sentImg"><img src="'+a+'"></span>',"["+T.messageSent+": "+(e in B?B[e]:e)+"]","green-text")},async function(e){e.responseText&&t(e.responseText,T.logError,"red-text")})},async function(e){var o=e.responseText;t(T.sendMessageError+o,T.logError,"red-text")},!0)}async function f(e,o,t=null){var a={chat_id:e,sticker:o};t&&(a.reply_markup=JSON.stringify(t)),v("sendSticker",a)}async function v(e,o={},t=async function(){},a=async function(){},n=!0){$.ajax({url:"https://api.telegram.org/bot"+E+"/"+e,async:n,method:"POST",data:o,dataType:"json",success:t,error:a})}var i,y,k,T,E="",S=-1,w=localStorage,x={},C={},I=0,_=0,A="",O="",B={},N=!1,D=0,U=0,R=(D=(new Date).getTime(),{"it-IT":{startingBot:"Avviando il bot... Connessione in corso ai server telegram...",emptyToken:"Bot non avviato! Bot token vuoto!",stopSent:"Richiesta di arresto inviata!",autoStart:"Bot in avvio secondo le tue impostazioni...",userDidntStartBot:"L'utente selezionato precedentemente ha bloccato il bot o non lo ha mai avviato.",unknownError:"Errore sconosciuto: ",autoSelectCID1:"Selezionata chat ",autoSelectCID2:" come da sessione precedente.",updatingCommands:"Aggiornamento lista comandi in corso...",updatedCommands:"Aggiornamento lista comandi completato!",botStopped:"Bot arrestato!",botStarted:"Bot avviato! Attenzione: Se chiudi questa pagina, verrà anche arrestato il tuo bot!",helpCmd:"/help per i comandi della console.",botInfo:"Info Bot:<br>Nome: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Token errato o non valido",conflict:"Conflitto, il bot ha il webhook già settato, oppure qualche altro programma è sul bot",connectionError:"Errore nella connessione: ",messageNotSupported:"Messaggio non supportato",sendMessageError:"Errore nell'invio del messaggio: ",helpConsoleCommands:"Menù comandi:<br />/help: visualizza questo menù di aiuto<br />/select: GUI per selezionare la chat in cui inviare i messaggi<br />&lt;messaggio&gt;: invia messaggio nella chat_id selezionata",removedChatIdSelection:"Rimossa selezione chat_id!",selected:"Selezionato ",noKnownChats:"Nessun chat_id conosciuto. Impossibile mostrare la GUI. Seleziona un chat_id manualmente con /select &lt;chat_id&gt;",unknownCommand:"Comando sconosciuto. /help per una lista completa di comandi.",messageTooLong:"Messaggio troppo lungo. Caratteri massimi consentiti: 4096 caratteri.",emptyMessage:"Messaggio nullo.",noChatSelected:"Per favore, prima di tentare di inviare un messaggio, usa /select",consoleBotNotStarted:'Prima di scrivere comandi, perfavore, metti il token del bot. Se lo hai già fatto, assicurati di aver avviato il bot cliccando il pulsante "Avvia"',messageSent:"Messaggio inviato: ",logError:"[ERRORE]",deleteMessageError:"Impossibile eliminare il messaggio ",regexpError:"Impossibile costruire la tastiera: l'espressione regolare non va avanti. Per favore, prova ad aggiornare il tuo browser, oppure avvia un'issue su Github",critError:"[ERRORE CRITICO]",hours:" ore ",minutes:" minuti ",seconds:" secondi ",settingWebhook:"Sto impostando il webhook...",botStoppedWebhookSet:"Bot arrestato e webhook settato!",errorWebhook:"Errore durante l'imposto del webhook: "},en:{startingBot:"Starting the bot... Connecting to telegram servers...",emptyToken:"Bot not started! Bot token empty!",stopSent:"Stop request sent!",autoStart:"Starting the bot according to your settings...",userDidntStartBot:"The user previously selected has blocked the bot or he hasn't started it at all.",unknownError:"Unknown error: ",autoSelectCID1:"Selected chat ",autoSelectCID2:" as previous session.",updatingCommands:"Updating commands list...",updatedCommands:"Commands list updated!",botStopped:"Bot stopped!",botStarted:"Bot started! Warning: If you close this page, your bot will be stopped too!",helpCmd:"/help for the console commands.",botInfo:"Bot Info:<br>Name: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Wrong token or token not valid",conflict:"Conflict, the bot has already setted webhook, or some other program is on the bot",connectionError:"Connection error: ",messageNotSupported:"Messsage not supported",sendMessageError:"Message sending error: ",helpConsoleCommands:"Commands menù:<br />/help: shows this help menu<br />/select: GUI to select chat to send messages in<br />&lt;messaggio&gt;: send message in selected chat",removedChatIdSelection:"Removed chat_id selection!",selected:"Selected ",noKnownChats:"No known chat_id. Unable to show the GUI. Select a chat_id manually with /select &lt;chat_id&gt;",unknownCommand:"Unknown command. /help for a commands list.",messageTooLong:"Message too long. Maximum allowed characters: 4096 characters.",emptyMessage:"Message empty.",noChatSelected:"Please, before trying to send a message, use /select",consoleBotNotStarted:'Before typing commands, enter the bot token. If you have already done it, make sure you\'ve clicked the "Start" button',messageSent:"Message sent: ",logError:"[ERROR]",deleteMessageError:"Can't delete message ",regexpError:"Can't build keyboard: Regexp not going forward. Please update your browser or put an issue on Github.",critError:"[CRITICAL ERROR]",hours:" hours ",minutes:" minutes ",seconds:" seconds ",settingWebhook:"Setting the webhook...",botStoppedWebhookSet:"Bot stopped and webhook set!",errorWebhook:"Error while setting the webhook: "}}),H={"it-IT":{commandsHelpTr:"/comando > Risposta<strong>;</strong>(se devi usare il punto e virgola, poi ritornare a capo, metti un \\ prima del ;. Esempio: <code>/start > Ciao\\;;</code>, invierà Ciao;)<br>      Nella risposta, puoi usare <strong>photo</strong> oppure <strong>sticker</strong> seguito da un <strong>file_id/url</strong> (per mettere la descrizione alla foto, vai a capo) per inviare una foto, o un semplice testo per inviare una risposta testuale.<br>      Saranno aggiunti altri tipi di documenti/video presto.<br>      Per ricevere il file_id di una foto, manda una foto al tuo bot con descrizione /fileid      <br><br>      Nella risposta testuale puoi usare i seguenti codici:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>, <code>{STARTTIME}</code>      <br>      <code>{CHATID}</code>: ID della chat<br>      <code>{USERID}</code>: ID utente<br>      <code>{CHATTITLE}</code>: Nel caso di un gruppo, il nome del gruppo, altrimenti il nome completo dell'utente<br>      <code>{NAME}</code>: Nome completo dell'utente<br>      <code>{FIRSTNAME}</code>: Nome dell'utente<br>      <code>{LASTNAME}</code>: Cognome dell'utente<br>      <code>{MSGTEXT}</code>: Testo messaggio inviato.<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Testo messaggio inviato escapato da HTML.      <code>{STARTTIME}</code>: Ore, minuti e secondi formattati basandosi sulla tua lingua.      <br><br>      Mettendo <code>any</code> come comando, questo risponderà ad ogni comando.      <br><br>      Puoi usare le tastiere inline mettendo sull'ultima linea della risposta al tuo comando <strong>[[[BOTTONE - COMANDO]]]</strong> e, una virgola prima dell'ultima parentesi quadra per mettere un altro bottone sull'altra linea della tastiera inline.      <br><code>[[[Bottone1 - comando1]],[[Bottone2 - comando2]]]</code>      <br>oppure, una virgola sulla parentesi direttamente successiva a COMANDO per un bottone sulla stessa linea      <br><code>[[[Bottone - comando],[Sono sulla stessa linea! - comando2]]]</code>      <br>Per rispondere ad un bottone cliccato, metti il callback data messo nel bottone come un normale comando      <code>comando1 > risposta1;</code> Il messaggio sarà modificato con risposta1      <br><br>Esempio pratico:<br>      <code>/start > Ciao! Clicca uno dei bottoni qui sotto:      <br>[[[Cosa fai? - //help],[Come sei stato creato? - //creato]],[[Ciao! - //saluto]]];      <br>//help > Non faccio niente :);      <br>//creato > Sono stato creato con EasyJSBot!;      <br>//saluto > Ciao!;</code><br><br>      <br>Puoi anche usare le tastiere tradizionali, la sintassi è (((RISPOSTA))) come con le tastiere inline, puoi ordinarle come vuoi:      <br><code>(((Ciao),(Come va?)))</code>: Ciao e Come va? saranno sulla stessa linea       <br><code>(((Ciao)),((Come va?)))</code>: Ciao e Come va? Saranno questa volta su linee diverse      <br>Facendo così, creerai una tastiera permanente, che si può rimuovere mettendo sulla risposta () che rimuoverà la tastiera      <br>Oppure, per nasconderla (necessiterai successivamente di rimuoverla), potrai mettere \", true\" alla fine delle parentesi <code>(((Ciao))), true</code> che creerà una      \"one time keyboard\" cioè, una tastiera che verrà nascosta automaticamente al click del bottone.      <br><br>Esempio pratico:<br>      <code>/start > Ciao, benvenuto sul bot. Clicca uno dei pulsanti:<br>      (((Come sei stato creato?),(Cosa puoi fare?)),((Ciao!)),((Rimuovi la tastiera)));<br>      Come sei stato creato? > Sono stato creato con EasyJSBot;<br>      Cosa puoi fare? > Niente, sono solo di test;<br>      Ciao! > Ciao!!;<br>      Rimuovi la tastiera > Ok! Invia /start se hai bisogno ancora di me!<br>      ();</code>      <br>Puoi usare anche le variabili: si dichiarano con $variabile = valore; Ex: <code>$saluto = Ciao!;</code>, e si possono usare dove      vuoi nella risposta, come keyboard inline, come keyboard tradizionali, ecc. <br>      I nomi delle variabili possono contenere i caratteri 0-9, A-Z, a-z e _. Qualsiasi altro carattere non è accettato e la variabile verrà ignorata.","tr-botToken":"Token del bot","tr-botcommands":"Comandi del bot",startBot:"Avvia!",stopBot:"Arresta","tr-autostart":"Avvia automaticamente il bot al caricamento della pagina","tr-logallmsg":"Logga i messaggi da qualsiasi chat","tr-createdby":"Creato da Pato05 <code>:)</code>","tr-cmdHelpTitle":"Help comandi",selectChId:"Seleziona la chat_id",removeChatId:"Rimuovi selezione","tr-all":"Invia tutti i messaggi","tr-random":"Messaggio casuale","tr-wh":"Send a message when the bot is offline"},en:{"tr-botToken":"Bot Token","tr-botcommands":"Bot commands",startBot:"Start!",stopBot:"Stop","tr-autostart":"Automatically start the bot at page load","tr-logallmsg":"Log messages from every chat","tr-createdby":"Created by Pato05 <code>:)</code>","tr-cmdHelpTitle":"Commands Help",selectChId:"Select the chat_id",removeChatId:"Remove selection",commandsHelpTr:"/command > Answer<strong>;</strong> (if you have to use the semicolon, then return, put a \\ before ;. Example: <code>/start > Hello\\;;</code>, it will send Hello;)<br>      In the answer, you can use <strong>photo</strong> or <strong>sticker</strong> followed by <strong>file_id/url</strong> (to put the caption to a photo, start a new line) to send a photo, or a simple text to send a textual answer.<br>      Will be added new types of documents/videos soon (I'm too lazy to do it now.)<br>      To get a photo file_id, send a photo to your active bot with caption /fileid      <br><br>      In the textual answer or caption you can use these codes:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>, <code>{STARTTIME}</code>      <br>      <code>{CHATID}</code>: Chat ID<br>      <code>{USERID}</code>: User ID<br>      <code>{CHATTITLE}</code>: In the case of a group, the group title, else the complete user's name<br>      <code>{NAME}</code>: Complete user's name<br>      <code>{FIRSTNAME}</code>: User's first name<br>      <code>{LASTNAME}</code>: User's last name<br>      <code>{MSGTEXT}</code>: Text of the message sent by the user<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Text of the message sent by the user HTML escaped.      <code>{STARTTIME}</code>: Ore, minuti e secondi formattati basandosi sulla tua lingua.      <br><br>      Putting <code>any</code> as command, it will answer to each message.      <br><br>      You can use inline keyboards by putting at the end of your answer <strong>[[[BUTTON - COMMAND]]]</strong> and, a virgola before the last bracket to put a button on a new line.      <br><code>[[[Button1 - command1]],[[Button2 - Command2]]]</code>      <br>or, a virgola after the bracket directly next at COMMAND for a button on the same line      <br><code>[[[Button - command],[I'm on the same line! - command2]]]</code>      <br>To answer a clicked button, put your button command like a normal command      <code>command1 > answer1;</code> The message will be edited with answer1      <br><br>Pratical example:<br>      <code>/start > Hello! Click one of the buttons below:      <br>[[[What do you do? - //help],[How have you been created? - //created]],[[Hi! - //greeting]]];      <br>//help > I don't do nothing :);      <br>//created > I have been created with EasyJSBot!;      <br>//greeting > Hello there!;</code><br><br>      <br>You can use traditional keyboards too, the syntax is (((ANSWER))) and, like as inline keyboards, you can order them as you wish:      <br><code>(((Hello),(How are you?)))</code>: Hello and How are you? will be on the same line      <br><code>(((Ciao)),((Come va?)))</code>: Hello and How are you? will now be on different lines      <br>Doing that you'll create a permanent keyboard, that can be removed with () in the last line of the answer      <br>Or, to hide it (you will equally need to remove it after), if you put \", true\" at the end of the brackets <code>(((Ciao))), true</code> it will create a      \"one time keyboard\", a keyboard that will be hided when a button is clicked.      <br><br>Pratical example:<br>      <code>/start > Hello, welcome to the bot. Click one of the buttons:<br>      (((How have you been created?),(What can you do?)),((Hello!)),((Remove keyboard)));<br>      How have you been created? > I've been created with EasyJSBot;<br>      What can you do? > Nothing, I am only for testing;<br>      Hello! > Hello there!!;<br>      Remove keyboard > Ok! Send again /start if you need me!<br>      ();</code>      <br>You can use variables: you can declare them by $variable = value; Ex: <code>$greeting = Hello!;</code>, and you can use them everywhere      in the command response, as inline keyboard, as traditional keyboard, etc. <br>      Variable names can contain the characters 0-9, A-Z, a-z and _. If you use every other character, the variable will be ignored.","tr-all":"Send all messages","tr-random":"Random message","tr-wh":"Send a message when the bot is offline"}},G=navigator.userLanguage||navigator.language;$(document).ready(async function(){function e(){if(T=R[G]||R.en,G in H)for(var[e,o]of Object.entries(H[G]))$("#"+e).html(o);else for(var[e,o]of Object.entries(H.en))$("#"+e).html(o)}if(-1!==location.href.indexOf("#")){var o=location.hash;"#debug=1"==o&&(N=!0,setTimeout(function(){t("DEBUG mode enabled","[DEBUG]")},0))}if(e(),$("#applyChatId").on("click",async function(){d("/select "+$("#selectChatId").val())}),$("#removeChatId").on("click",async function(){d("/select 0")}),$("#autoStart").on("change",s),$("#logAllMsg").on("change",s),$("#parseMode").on("change",s),$("#wpPreview").on("change",s),$("#ufUpdAnalyzer").on("change",s),$("#sendAll").on("change",s),$("#offlineWebhook").on("change",s),$("#consoleCommandsGo").click(function(){var e=$("#consoleCommands");e.val().replace(/\\n/g,"\n");A=e.val(),d(e.val()),e.val("")}),$("#consoleCommands").focus(async function(){$("#consoleCommandsContainer").css("background","rgb(15, 15, 15)")}),$("#consoleCommands").blur(async function(){$("#consoleCommandsContainer").css("background","#000")}),$(window).on("beforeunload",function(){if(0!=I)return"Il bot è in esecuzione. Per favore, clicca Arresta prima di lasciare la pagina"}),$("#consoleCommands").keyup(async function(e){var o=Math.round((new Date).getTime()/1e3);o-U>5&&(u(_,"typing"),U=o),13==e.keyCode?($("#consoleCommandsGo").click(),U=0):38==e.keyCode&&$(this).val(A)}),$("#startBot").click(function(){E=$("#token").val(),""!=E&&E?($("#startBot").prop("disabled",!0),t(T.startingBot,"[INFO]","blue-text"),i()):t(T.emptyToken,T.logError,"red-text")}),$("#stopBot").click(async function(){I="stop",$("#stopBot").prop("disabled",!0),t(T.stopSent,"[INFO]","yellow-text")}),$("#langIT").click(async function(){G="it-IT",e()}),$("#langEN").click(async function(){G="en",e()}),
$("#commands").blur(async function(){a(!0)}),$("#updateCommands").click(a),"commands"in w?($("#commands").val(w.commands),-1!==w.commands.indexOf("///////////")&&($("#commands").val($("#commands").val().split("///////////").join("\n")),a())):$("#commands").val("/start > Messaggio di avvio!;\n/help > Menù di aiuto!;"),"botToken"in w&&($("#token").val(w.botToken),E=$("#token").val()),"botSettings"in w){var n=JSON.parse(w.botSettings);"parseMode"in n&&$("#parseMode").val(n.parseMode),"wpPreview"in n&&$("#wpPreview").val(n.wpPreview),"autoStart"in n&&($("#autoStart").prop("checked",n.autoStart),1==n.autoStart&&setTimeout(function(){t(T.autoStart,"[INFO]","yellow-text"),""!=E&&E?$("#startBot").click():(t(T.emptyToken,T.logError,"red-text"),$("#autoStart").prop("checked",!1),s())},0)),"logAllMsg"in n&&$("#logAllMsg").prop("checked",n.logAllMsg),"knownChatIDs"in n&&(B=JSON.parse(n.knownChatIDs)),"ufUpdAnalyzer"in n&&$("#ufUpdAnalyzer").prop("checked",n.ufUpdAnalyzer),"sendAll"in n&&$("#sendAll").prop("checked",n.sendAll),"offlineWebhook"in n&&$("#offlineWebhook").prop("checked",n.offlineWebhook),"selectedChatId"in n&&0!=n.selectedChatId&&setTimeout(async function(){_=n.selectedChatId,!_ in B?v("getChat",{chat_id:_},function(e){},async function(e){var o=JSON.parse(e.responseText),a=o.error_code;o.description;t(403==a?T.userDidntStartBot:T.unknownError+JSON.stringify(o),T.logError,"red-text"),_=""}):t(T.autoSelectCID1+B[_]+T.autoSelectCID2,"[INFO]","yellow-text")},0)}M.updateTextFields(),$("#commands").css("height","auto"),setTimeout(function(){M.textareaAutoResize($("#commands"))},200),$(".tooltipped").tooltip(),$("select").formSelect(),$(".modal").modal(),$(".dropdown-trigger").dropdown(),a(!1),r()})})();