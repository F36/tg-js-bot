"use strict";function splitTwo(e,t){var o=e.split(t);return e=e.substr(o[0].length+t.length),[o[0],e]}function replaceArray(e,t,o){for(var a,n=0;n<e.length;n++)a=new RegExp(e[n],"g"),o=o.replace(a,t[n]);return o}async function log(e,t="[INFO]",o="white-text"){var a=$("#console"),n=$("<span>");n.attr("class",o),""!=t&&(t+=" "),n.html(t+e),a.append(n),a.append("<br>"),a.scrollTop(a[0].scrollHeight-a.height())}async function updateCommands(e=!0){$("#updateCommands").prop("disabled",!0),e&&log(l.updatingCommands,"[INFO]","yellow-text"),commands={};var t=$("#commands").val(),o=t.split(/(?<!\\); *$/gm);for(var a of o){"\n"===a.charAt(0)&&(a=a.substr(1));var n=splitTwo(a," > "),s=0==n[1].indexOf("photo "),r=!1,i=n[1].split(/\n/g),d=i[i.length-1];if(s){n[1]=splitTwo(n[1],"photo ")[1];var c="";-1!==n[1].indexOf("\n")&&(c=splitTwo(n[1],"\n")[1])&&-1===c.indexOf("[[[")&&-1===c.indexOf("(((")||c!==d?(n[1]=splitTwo(n[1],c)[0],c=c.substring(0,c.lastIndexOf("\n")),console.log(d,c)):c=""}else 0===n[1].indexOf("sticker ")&&(n[1]=splitTwo(n[1],"sticker ")[1],r=!0);var m=null;if(0===d.indexOf("[[[")){m={inline_keyboard:[]},debug&&log("Building inline keyboard","[DEBUG]");for(var g=/\[?(,? ?\[?(,? ?\[(.*?)-(.*?)\]?)\])\]?/g,u=0,p=0;b=g.exec(d);){if(h=0===b[4].indexOf("https://")||0===b[4].indexOf("http://")||0===b[4].indexOf("tg://")?{text:b[3],url:b[4]}:{text:b[3],callback_data:b[4]},debug&&log("Pushing <code>"+JSON.stringify(h)+"</code> into the keyboard array.","[DEBUG]"),p++,p>1&&g.lastIndex<p)return log(l.regexpError,l.critError,"red-text"),void alert(l.critError+" "+l.regexpError);0===b[1].indexOf(", [[")||0===b[1].indexOf(",[[")||0===b[1].indexOf("[[")?(m.inline_keyboard.push([h]),u++):m.inline_keyboard[u-1].push(h)}debug&&log("Inline keyboard built.","[DEBUG]"),n[1]=n[1].substring(0,n[1].lastIndexOf("\n")),console.log(commands)}else if(0===d.indexOf("(((")){var u=0;m={keyboard:[]},debug&&log("Building traditional keyboard","[DEBUG]");for(g=/\(?(,? ?\(?(,? ?\((.*?)\)?)\))\)?/g;b=g.exec(d);){var h={text:b[3]};debug&&log("Pushing <code>"+JSON.stringify(h)+"</code> into the keyboard array.","[DEBUG]"),0===b[1].indexOf(", ((")||0===b[1].indexOf(",((")||0===b[1].indexOf("((")?(m.keyboard.push([h]),u++):m.keyboard[u-1].push(h)}(d.endsWith(",true")||d.endsWith(", true"))&&(m.one_time_keyboard=!0,debug&&log("One time keyboard detected")),debug&&log("Keyboard built.","[DEBUG]"),n[1]=n[1].substring(0,n[1].lastIndexOf("\n"))}else if(0===d.indexOf("()")){var b;m={remove_keyboard:!0},debug&&log("Remove keyboard put into reply_markup","[DEBUG]"),n[1]=n[1].substring(0,n[1].lastIndexOf("\n"))}u=s?[n[1],"photo",c,m]:r?[n[1],"sticker",m]:[n[1],"text",m],console.log(u),n[0]in commands?commands[n[0]].push(u):commands[n[0]]=[u]}localStorage.setItem("commands",$("#commands").val()),e&&log(l.updatedCommands,"[INFO]","green-text"),$("#updateCommands").prop("disabled",!1)}function htmlEncode(e){return $("<div>").text(e).html()}async function updateAnalyzer(){request("getUpdates",{offset:updateOffset},async function(e){var t={};if("stop"==started)return $("#startBot").prop("disabled",!1),log(l.botStopped,"[INFO]","blue-text"),started=0,!0;setTimeout(updateAnalyzer,$("#ufUpdAnalyzer").prop("checked")?0:500),e.result!==[]&&e.result&&e.result.length>0&&(debug&&(log("Received update "+htmlEncode(JSON.stringify(e)),"[DEBUG]"),startTime=(new Date).getTime(),log("Start Time: "+startTime,"[DEBUG]")),t=e.result[0],updateOffset=t.update_id,analyzeUpdate(t),updateOffset++),0==started&&(localStorage.setItem("botToken",$("#token").val()),log(l.botStarted,"[INFO]","blue-text"),log(l.helpCmd),$("#stopBot").prop("disabled",!1),request("getMe",{},async function(e){botInfo=e.result,botUsername=botInfo.username;var t=["{BOTNAME}","{TMEBOTUSERNAME}"],o=[htmlEncode(botInfo.first_name),'<a href="https://t.me/'+botUsername+'">@'+botUsername+"</a>"];log(replaceArray(t,o,l.botInfo))}),started=1)},async function(e){var t=e.responseText,o=JSON.parse(e.responseText),a="Errore sconosciuto";403==o.error_code||404==o.error_code?a=l.wrongToken:409==o.error_code&&(a=l.conflict),log(l.connectionError+t+"<br />"+a,l.logError,"red-text"),$("#stopBot").prop("disabled",!0),$("#startBot").prop("disabled",!1),started=0})}async function updateBotSettings(){if(""!=botToken&&botToken){if(debug){log("Updating bot settings...","[DEBUG]");var e=(new Date).getTime()}localStorage.setItem("botSettings",JSON.stringify({parseMode:$("#parseMode").val(),wpPreview:$("#wpPreview").val(),autoStart:$("#autoStart").prop("checked"),logAllMsg:$("#logAllMsg").prop("checked"),ufUpdAnalyzer:$("#ufUpdAnalyzer").prop("checked"),selectedChatId:selectedChatId,knownChatIDs:JSON.stringify(knownChatIDs),sendAll:$("#sendAll").prop("checked")})),debug&&log("Updated bot settings<br />Response time: "+((new Date).getTime()-e)+"ms","[DEBUG]")}}async function analyzeUpdate(e){var t,o,a,n,s,r,i="",d=0,c="",m=!1,g=0;if(debug&&log("Analysing update: "+htmlEncode(JSON.stringify(e)),"[DEBUG]"),"message"in e){if(v=e.message,!("chat"in v))return log(l.messageNotSupported,"[WARNING]","yellow-text"),!1;if(d=v.chat.id,"title"in v.chat&&(a=v.chat.title,m=!0),"from"in v&&("first_name"in v.from?(s=v.from.first_name,c=s):s="","last_name"in v.from?(n=v.from.last_name,c+=" "+n):n="",g="id"in v.from?v.from.id:0),o=void 0!==a?a:c,"text"in v)i=v.text,t="/"==i.charAt(0)&&-1!==i.indexOf("@"+botUsername)?i.replace("@"+botUsername,""):i;else if("photo"in v){var u=v.photo[v.photo.length-1].file_id,p=v.caption;(selectedChatId==d||$("#logAllMsg").prop("checked"))&&request("getFile",{file_id:u},async function(e){var t="https://api.telegram.org/file/bot"+botToken+"/"+e.result.file_path;log('<span class="sentImg"><img src="'+t+'"><br>'+(p||"")+"</span>","["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")}),i=""}else if("video"in v){p=v.caption;var h=v.video.file_id;(selectedChatId==d||$("#logAllMsg").prop("checked"))&&request("getFile",{file_id:h},async function(e){var t="https://api.telegram.org/file/bot"+botToken+"/"+e.result.file_path;log('<span class="sentImg"><video src="'+t+'" controls></video><br>'+(p||"")+"</span>","["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")}),i=""}else if("sticker"in v){h=v.sticker.file_id;(selectedChatId==d||$("#logAllMsg").prop("checked"))&&request("getFile",{file_id:h},async function(e){var t="https://api.telegram.org/file/bot"+botToken+"/"+e.result.file_path;log('Sticker: <span class="sentImg"><img class="sticker" src="'+t+'"><br>'+(p||"")+"</span>","["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")}),i=""}else if("voice"in v){p=v.caption,h=v.voice.file_id;(selectedChatId==d||$("#logAllMsg").prop("checked"))&&request("getFile",{file_id:h},async function(e){var t="https://api.telegram.org/file/bot"+botToken+"/"+e.result.file_path;log('<span class="sentImg"><audio src="'+t+'" controls></audio><br>'+(p||"")+"</span>","["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")}),i=""}else if("video_note"in v){p=v.caption,h=v.video_note.file_id;(selectedChatId==d||$("#logAllMsg").prop("checked"))&&request("getFile",{file_id:h},async function(e){var t="https://api.telegram.org/file/bot"+botToken+"/"+e.result.file_path;log('<span class="sentImg"><video class="video_note" src="'+t+'" controls></video><br>'+(p||"")+"</span>","["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")}),i=""}}else if("callback_query"in e){var b=e.callback_query,f=b.data,v=b.message,y=b.id,T=b.from;g=T.id;"first_name"in T&&(s=T.first_name),c=s,"last_name"in T&&(n=T.last_name,c+=" "+n),d=b.message.chat.id,"chat"in v&&(d=v.chat.id,"title"in v.chat&&(a=v.chat.title,m=!0)),o=void 0!==a?a:c,t=f,i=f,answerCallbackQuery(y),debug&&log("Callback Data: "+f,"["+htmlEncode(c)+"]",selectedChatId==g?"yellow-text":"white-text")}else i=l.messageNotSupported;selectedChatId!=d&&!$("#logAllMsg").prop("checked")||void 0!==f||i&&log(htmlEncode(i),"["+(m?htmlEncode(a)+": ":"")+htmlEncode(c)+"]",selectedChatId==d?"yellow-text":"white-text"),knownChatIDs[d]=o,r=new Date((new Date).getTime()-startTime);var C=["{CHATID}","{USERID}","{CHATTITLE}","{NAME}","{FIRSTNAME}","{LASTNAME}","{MSGTEXT}","{HTMLESCAPEDMSGTEXT}","{STARTTIME}"],k=[d,g,"HTML"==$("#parseMode").val()?htmlEncode(o):o,"HTML"==$("#parseMode").val()?htmlEncode(c):c,"HTML"==$("#parseMode").val()?htmlEncode(s):s,"HTML"==$("#parseMode").val()?htmlEncode(n):n,i,htmlEncode(i),r.getHours()-1+l.hours+r.getMinutes()+l.minutes+r.getSeconds()+l.seconds];if("/fileid"==p&&sendMessage(d,"FileID: <code>"+u+"</code>",null,!1,"HTML"),"/fileid"===t&&"reply_to_message"in v){var E=v.reply_to_message;if("photo"in E)h=E.photo[v.photo.length-1].file_id;else if("video"in E)h=E.video.file_id;else if("voice"in E)h=E.voice.file_id;else if("video_note"in E)h=E.video_note.file_id;else if("audio"in E)h=E.audio.file_id;else if("document"in E)h=E.document.file_id;else if("sticker"in E)h=E.sticker.file_id;else h="Not available or not compatible";sendMessage(d,"File ID: <code>"+h+"</code>",null,!1,"HTML")}if(t in commands&&""!=t)for(var S of commands[t]){if($("#sendAll").prop("checked")||(S=commands[t][Math.floor(Math.random()*commands[t].length)]),console.log(S),"text"==S[1]){var I=replaceArray(C,k,S[0]);debug&&log("Text to send: "+htmlEncode(I),"[DEBUG]");var w=null;2 in S&&(w=S[2],w=JSON.stringify(w),w=replaceArray(C,k,w),w=JSON.parse(w)),void 0!==f?$.isEmptyObject(w)||"inline_keyboard"in w?"photo"in v?(debug&&log("Message to edit is a photo. Incompatible types photo, text. Deleting previous message and sending a new one.","[DEBUG]"),deleteMessage(d,v.message_id),sendMessage(d,I,w)):editMessageText(d,I,v.message_id,w):(debug&&log("reply_markup is not an inline keyboard and request has been sent by a button, sending a new message and deleting the existing one.","[DEBUG]"),deleteMessage(d,v.message_id),sendMessage(d,I,w)):sendMessage(d,I,w)}else if("photo"==S[1]){p="",w=null;var M=null;2 in S&&(p=replaceArray(C,k,S[2]),debug&&log("Caption to send: "+htmlEncode(p),"[DEBUG]")),3 in S&&(w=S[3],w=JSON.stringify(w),w=replaceArray(C,k,w),w=JSON.parse(w)),void 0!==f?$.isEmptyObject(w)||"inline_keyboard"in w?"text"in v?(debug&&log("Message to edit is a text. Incompatible types photo, text. Deleting previous message and sending a new one.","[DEBUG]"),deleteMessage(d,v.message_id),sendPhoto(d,S[0],p,w)):(M={type:"photo",media:S[0],caption:p},editMessageMedia(d,v.message_id,M,w)):(debug&&log("reply_markup is not an inline keyboard and request has been sent by a button, sending a new message and deleting the existing one.","[DEBUG]"),deleteMessage(d,v.message_id),sendPhoto(d,S[0],p,w)):sendPhoto(d,S[0],p,w)}else if("sticker"==S[1]){w=null;2 in S&&(w=S[2],w=JSON.stringify(w),w=replaceArray(C,k,w),w=JSON.parse(w)),void 0!==f&&(deleteMessage(d,v.message_id),debug&&log("Can't edit sticker.","[DEBUG]")),sendSticker(d,S[0],w)}if(!$("#sendAll").prop("checked"))break}if("any"in commands&&void 0===f)for(var S of commands.any){if($("#sendAll").prop("checked")||(S=commands.any[Math.floor(Math.random()*commands.any.length)]),"text"==S[1]){I=replaceArray(C,k,S[0]);debug&&log("Text to send: "+htmlEncode(I),"[DEBUG]");w={};2 in S&&(w=S[2]),sendMessage(d,I,w)}else if("photo"==S[1]){p="";2 in S&&(p=replaceArray(C,k,S[2]),debug&&log("Caption to send: "+htmlEncode(p),"[DEBUG]")),sendPhoto(d,S[0],p)}if(!$("#sendAll").prop("checked"))break}debug&&log("Response Time: "+((new Date).getTime()-startTime)+"ms","[DEBUG]")}async function sendCommand(e){if(""!=botToken&&botToken&&1==started)switch(splitTwo(e," ")[0]){case"/help":log(l.helpConsoleCommands,"");break;case"/select":var t=splitTwo(e," ");if(1 in t&&t[1])selectedChatId=t[1],log(0==selectedChatId?l.removedChatIdSelection:l.selected+selectedChatId+"!","[INFO]","green-text"),updateBotSettings();else if($.isEmptyObject(knownChatIDs))log(l.noKnownChats,l.logError,"red-text");else{var o="";for(var a in knownChatIDs)o+='<option value="'+a+'"'+(a==selectedChatId?" selected":"")+">"+htmlEncode(knownChatIDs[a])+"</option>";$("#selectChatId").html(o).formSelect(),$("#selectChatIdModal").modal("open")}break;default:"/"==e.charAt(0)?log(l.unknownCommand,l.logError,"red-text"):0!=selectedChatId?(e=e.replace(/\\n/g,"\n"),e.replace(new RegExp(" ","g"),"").length>0?e.length<=4096?sendMessage(selectedChatId,e,{},!0):log(l.messageTooLong,l.logError,"red-text"):log(l.emptyMessage,l.logError,"red-text")):log(l.noChatSelected,l.logError,"red-text")}else log(l.consoleBotNotStarted,l.logError,"red-text")}async function answerCallbackQuery(e,t,o){var a={callback_query_id:e,text:t,show_alert:o};request("answerCallbackQuery",a)}async function deleteMessage(e,t){var o={chat_id:e,message_id:t};request("deleteMessage",o,async function(){},async function(e){var o=e.responseText;log(l.deleteMessageError+t+": "+o,l.logError,"red-text")},!0)}async function sendChatAction(e,t){var o={chat_id:e,action:t};request("sendChatAction",o)}async function sendMessage(e,t,o=null,a=!1,n=!1,s=!1){if(n||(n=$("#parseMode").val()),s||(s=$("#wpPreview").val()),null!=e&&""!=e||e){var r={chat_id:e,text:t,parse_mode:n,disable_web_page_preview:s};return o&&(r.reply_markup=JSON.stringify(o)),request("sendMessage",r,async function(t){a&&log(t.result.text,"["+l.messageSent+(e in knownChatIDs?knownChatIDs[e]:e)+"]","green-text")},async function(e){var t=e.responseText;log(l.sendMessageError+t,l.logError,"red-text")},!0),!0}return!1}async function editMessageText(e,t,o,a=null,n=!1,s=!1,r=!1){if(s||(s=$("#parseMode").val()),r||(r=$("#wpPreview").val()),!(null!=e&&""!=e||e))return!1;var i={chat_id:e,text:t,parse_mode:s,message_id:o,disable_web_page_preview:r};a&&(i.reply_markup=JSON.stringify(a)),request("editMessageText",i,async function(){},async function(e){var t=e.responseText;log(l.sendMessageError+t,l.logError,"red-text")},!0)}async function editMessageMedia(e,t,o,a=null,n=!1){if(n||(n=$("#parseMode").val()),!(null!=e&&""!=e||e))return!1;"parse_mode"in o||(o.parse_mode=n);var s={chat_id:e,message_id:t,media:JSON.stringify(o)};a&&(s.reply_markup=JSON.stringify(a)),request("editMessageMedia",s,async function(){},async function(e){var t=e.responseText;log(l.sendMessageError+t,l.logError,"red-text")},!0)}async function sendPhoto(e,t,o="",a=null,n=!1,s=!1,r=!1){s||(s=$("#parseMode").val()),r||(r=$("#wpPreview").val());var i={chat_id:e,photo:t,caption:o,parse_mode:s=s,disable_web_page_preview:r};a&&(i.reply_markup=JSON.stringify(a)),request("sendPhoto",i,async function(o){n&&request("getFile",{file_id:t},async function(t){var o="https://api.telegram.org/file/bot"+botToken+"/"+t.result.file_path;log('<span class="sentImg"><img src="'+o+'"></span>',"["+l.messageSent+": "+(e in knownChatIDs?knownChatIDs[e]:e)+"]","green-text")},async function(e){e.responseText&&log(e.responseText,l.logError,"red-text")})},async function(e){var t=e.responseText;log(l.sendMessageError+t,l.logError,"red-text")},!0)}async function sendSticker(e,t,o=null){var a={chat_id:e,sticker:t};o&&(a.reply_markup=JSON.stringify(o)),request("sendSticker",a)}async function request(e,t={},o=async function(){},a=async function(){},n=!0){$.ajax({url:"https://api.telegram.org/bot"+botToken+"/"+e,async:n,method:"POST",data:t,dataType:"json",success:o,error:a})}var updateAnalyzer,botInfo,botToken="",updateOffset=-1,cookies=localStorage,commands={},started=0,selectedChatId=0,lastCommand="",botUsername="",knownChatIDs={},debug=!1,startTime=0,cActionTime=0,logTranslations=(startTime=(new Date).getTime(),{"it-IT":{startingBot:"Avviando il bot... Connessione in corso ai server telegram...",emptyToken:"Bot non avviato! Bot token vuoto!",stopSent:"Richiesta di arresto inviata!",autoStart:"Bot in avvio secondo le tue impostazioni...",userDidntStartBot:"L'utente selezionato precedentemente ha bloccato il bot o non lo ha mai avviato.",unknownError:"Errore sconosciuto: ",autoSelectCID1:"Selezionata chat ",autoSelectCID2:" come da sessione precedente.",updatingCommands:"Aggiornamento lista comandi in corso...",updatedCommands:"Aggiornamento lista comandi completato!",botStopped:"Bot arrestato!",botStarted:"Bot avviato! Attenzione: Se chiudi questa pagina, verrà anche arrestato il tuo bot!",helpCmd:"/help per i comandi della console.",botInfo:"Info Bot:<br>Nome: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Token errato o non valido",conflict:"Conflitto, il bot ha il webhook già settato, oppure qualche altro programma è sul bot",connectionError:"Errore nella connessione: ",messageNotSupported:"Messaggio non supportato",sendMessageError:"Errore nell'invio del messaggio: ",helpConsoleCommands:"Menù comandi:<br />/help: visualizza questo menù di aiuto<br />/select: GUI per selezionare la chat in cui inviare i messaggi<br />&lt;messaggio&gt;: invia messaggio nella chat_id selezionata",removedChatIdSelection:"Rimossa selezione chat_id!",selected:"Selezionato ",noKnownChats:"Nessun chat_id conosciuto. Impossibile mostrare la GUI. Seleziona un chat_id manualmente con /select &lt;chat_id&gt;",unknownCommand:"Comando sconosciuto. /help per una lista completa di comandi.",messageTooLong:"Messaggio troppo lungo. Caratteri massimi consentiti: 4096 caratteri.",emptyMessage:"Messaggio nullo.",noChatSelected:"Per favore, prima di tentare di inviare un messaggio, usa /select",consoleBotNotStarted:'Prima di scrivere comandi, perfavore, metti il token del bot. Se lo hai già fatto, assicurati di aver avviato il bot cliccando il pulsante "Avvia"',messageSent:"Messaggio inviato: ",logError:"[ERRORE]",deleteMessageError:"Impossibile eliminare il messaggio ",regexpError:"Impossibile costruire la tastiera: l'espressione regolare non va avanti. Per favore, prova ad aggiornare il tuo browser, oppure avvia un'issue su Github",critError:"[ERRORE CRITICO]",hours:" ore ",minutes:" minuti ",seconds:" secondi "},en:{startingBot:"Starting the bot... Connecting to telegram servers...",emptyToken:"Bot not started! Bot token empty!",stopSent:"Stop request sent!",autoStart:"Starting the bot according to your settings...",userDidntStartBot:"The user previously selected has blocked the bot or he hasn't started it at all.",unknownError:"Unknown error: ",autoSelectCID1:"Selected chat ",autoSelectCID2:" as previous session.",updatingCommands:"Updating commands list...",updatedCommands:"Commands list updated!",botStopped:"Bot stopped!",botStarted:"Bot started! Warning: If you close this page, your bot will be stopped too!",helpCmd:"/help for the console commands.",botInfo:"Bot Info:<br>Name: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Wrong token or token not valid",conflict:"Conflict, the bot has already setted webhook, or some other program is on the bot",connectionError:"Connection error: ",messageNotSupported:"Messsage not supported",sendMessageError:"Message sending error: ",helpConsoleCommands:"Commands menù:<br />/help: shows this help menu<br />/select: GUI to select chat to send messages in<br />&lt;messaggio&gt;: send message in selected chat",removedChatIdSelection:"Removed chat_id selection!",selected:"Selected ",noKnownChats:"No known chat_id. Unable to show the GUI. Select a chat_id manually with /select &lt;chat_id&gt;",unknownCommand:"Unknown command. /help for a commands list.",messageTooLong:"Message too long. Maximum allowed characters: 4096 characters.",emptyMessage:"Message empty.",noChatSelected:"Please, before trying to send a message, use /select",consoleBotNotStarted:'Before typing commands, enter the bot token. If you have already done it, make sure you\'ve clicked the "Start" button',messageSent:"Message sent",logError:"[ERROR]",deleteMessageError:"Can't delete message ",regexpError:"Can't build keyboard: Regexp not going forward. Please update your browser or put an issue on Github.",critError:"[CRITICAL ERROR]",hours:" hours ",minutes:" minutes ",seconds:" seconds "}}),translations={"it-IT":{commandsHelpTr:"/comando > Risposta<strong>;</strong>(se devi usare il punto e virgola, poi ritornare a capo, metti un \\ prima del ;. Esempio: <code>/start > Ciao\\;;</code>, invierà Ciao;)<br>      Nella risposta, puoi usare <strong>photo</strong> oppure <strong>sticker</strong> seguito da un <strong>file_id/url</strong> (per mettere la descrizione alla foto, vai a capo) per inviare una foto, o un semplice testo per inviare una risposta testuale.<br>      Saranno aggiunti altri tipi di documenti/video presto.<br>      Per ricevere il file_id di una foto, manda una foto al tuo bot con descrizione /fileid      <br><br>      Nella risposta testuale puoi usare i seguenti codici:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>, <code>{STARTTIME}</code>      <br>      <code>{CHATID}</code>: ID della chat<br>      <code>{USERID}</code>: ID utente<br>      <code>{CHATTITLE}</code>: Nel caso di un gruppo, il nome del gruppo, altrimenti il nome completo dell'utente<br>      <code>{NAME}</code>: Nome completo dell'utente<br>      <code>{FIRSTNAME}</code>: Nome dell'utente<br>      <code>{LASTNAME}</code>: Cognome dell'utente<br>      <code>{MSGTEXT}</code>: Testo messaggio inviato.<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Testo messaggio inviato escapato da HTML.      <code>{STARTTIME}</code>: Ore, minuti e secondi formattati basandosi sulla tua lingua.      <br><br>      Mettendo <code>any</code> come comando, questo risponderà ad ogni comando.      <br><br>      Puoi usare le tastiere inline mettendo sull'ultima linea della risposta al tuo comando <strong>[[[BOTTONE-COMANDO]]]</strong> e, una virgola prima dell'ultima parentesi quadra per mettere un altro bottone sull'altra linea della tastiera inline.      <br><code>[[[Bottone1-comando1]],[[Bottone2-comando2]]]</code>      <br>oppure, una virgola sulla parentesi direttamente successiva a COMANDO per un bottone sulla stessa linea      <br><code>[[[Bottone-comando],[Sono sulla stessa linea!-comando2]]]</code>      <br>Per rispondere ad un bottone cliccato, metti il callback data messo nel bottone come un normale comando      <code>comando1 > risposta1;</code> Il messaggio sarà modificato con risposta1      <br><br>Esempio pratico:<br>      <code>/start > Ciao! Clicca uno dei bottoni qui sotto:      <br>[[[Cosa fai?-//help],[Come sei stato creato?-//creato]],[[Ciao!-//saluto]]];      <br>//help > Non faccio niente :);      <br>//creato > Sono stato creato con EasyJSBot!;      <br>//saluto > Ciao!;</code><br><br>      <br>Puoi anche usare le tastiere tradizionali, la sintassi è (((RISPOSTA))) come con le tastiere inline, puoi ordinarle come vuoi:      <br><code>(((Ciao),(Come va?)))</code>: Ciao e Come va? saranno sulla stessa linea       <br><code>(((Ciao)),((Come va?)))</code>: Ciao e Come va? Saranno questa volta su linee diverse      <br>Facendo così, creerai una tastiera permanente, che si può rimuovere mettendo sulla risposta () che rimuoverà la tastiera      <br>Oppure, per nasconderla (necessiterai successivamente di rimuoverla), potrai mettere \", true\" alla fine delle parentesi <code>(((Ciao))), true</code> che creerà una      \"one time keyboard\" cioè, una tastiera che verrà nascosta automaticamente al click del bottone.      <br><br>Esempio pratico:<br>      <code>/start > Ciao, benvenuto sul bot. Clicca uno dei pulsanti:<br>      (((Come sei stato creato?),(Cosa puoi fare?)),((Ciao!)),((Rimuovi la tastiera)));<br>      Come sei stato creato? > Sono stato creato con EasyJSBot;<br>      Cosa puoi fare? > Niente, sono solo di test;<br>      Ciao! > Ciao!!;<br>      Rimuovi la tastiera > Ok! Invia /start se hai bisogno ancora di me!<br>      ();</code>","tr-botToken":"Token del bot","tr-botcommands":"Comandi del bot",startBot:"Avvia!",stopBot:"Arresta","tr-autostart":"Avvia automaticamente il bot al caricamento della pagina","tr-logallmsg":"Logga i messaggi da qualsiasi chat","tr-createdby":"Creato da Pato05 <code>:)</code>","tr-cmdHelpTitle":"Help comandi",selectChId:"Seleziona la chat_id",removeChatId:"Rimuovi selezione","tr-all":"Invia tutti i messaggi","tr-random":"Messaggio casuale"},en:{"tr-botToken":"Bot Token","tr-botcommands":"Bot commands",startBot:"Start!",stopBot:"Stop","tr-autostart":"Automatically start the bot at page load","tr-logallmsg":"Log messages from every chat","tr-createdby":"Created by Pato05 <code>:)</code>","tr-cmdHelpTitle":"Commands Help",selectChId:"Select the chat_id",removeChatId:"Remove selection",commandsHelpTr:"/command > Answer<strong>;</strong> (if you have to use the semicolon, then return, put a \\ before ;. Example: <code>/start > Hello\\;;</code>, it will send Hello;)<br>      In the answer, you can use <strong>photo</strong> or <strong>sticker</strong> followed by <strong>file_id/url</strong> (to put the caption to a photo, start a new line) to send a photo, or a simple text to send a textual answer.<br>      Will be added new types of documents/videos soon (I'm too lazy to do it now.)<br>      To get a photo file_id, send a photo to your active bot with caption /fileid      <br><br>      In the textual answer or caption you can use these codes:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>, <code>{STARTTIME}</code>      <br>      <code>{CHATID}</code>: Chat ID<br>      <code>{USERID}</code>: User ID<br>      <code>{CHATTITLE}</code>: In the case of a group, the group title, else the complete user's name<br>      <code>{NAME}</code>: Complete user's name<br>      <code>{FIRSTNAME}</code>: User's first name<br>      <code>{LASTNAME}</code>: User's last name<br>      <code>{MSGTEXT}</code>: Text of the message sent by the user<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Text of the message sent by the user HTML escaped.      <code>{STARTTIME}</code>: Ore, minuti e secondi formattati basandosi sulla tua lingua.      <br><br>      Putting <code>any</code> as command, it will answer to each message.      <br><br>      You can use inline keyboards by putting at the end of your answer <strong>[[[BUTTON-COMMAND]]]</strong> and, a virgola before the last bracket to put a button on a new line.      <br><code>[[[Button1-command1]],[[Button2-Command2]]]</code>      <br>or, a virgola after the bracket directly next at COMMAND for a button on the same line      <br><code>[[[Button-command],[I'm on the same line!-command2]]]</code>      <br>To answer a clicked button, put your button command like a normal command      <code>command1 > answer1;</code> The message will be edited with answer1      <br><br>Pratical example:<br>      <code>/start > Hello! Click one of the buttons below:      <br>[[[What do you do?-//help],[How have you been created?-//created]],[[Hi!-//greeting]]];      <br>//help > I don't do nothing :);      <br>//created > I have been created with EasyJSBot!;      <br>//greeting > Hello there!;</code><br><br>      <br>You can use traditional keyboards too, the syntax is (((ANSWER))) and, like as inline keyboards, you can order them as you wish:      <br><code>(((Hello),(How are you?)))</code>: Hello and How are you? will be on the same line      <br><code>(((Ciao)),((Come va?)))</code>: Hello and How are you? will now be on different lines      <br>Doing that you'll create a permanent keyboard, that can be removed with () in the last line of the answer      <br>Or, to hide it (you will equally need to remove it after), if you put \", true\" at the end of the brackets <code>(((Ciao))), true</code> it will create a      \"one time keyboard\", a keyboard that will be hided when a button is clicked.      <br><br>Pratical example:<br>      <code>/start > Hello, welcome to the bot. Click one of the buttons:<br>      (((How have you been created?),(What can you do?)),((Hello!)),((Remove keyboard)));<br>      How have you been created? > I've been created with EasyJSBot;<br>      What can you do? > Nothing, I am only for testing;<br>      Hello! > Hello there!!;<br>      Remove keyboard > Ok! Send again /start if you need me!<br>      ();</code>","tr-all":"Send all messages","tr-random":"Random message"}},navLang=navigator.userLanguage||navigator.language,l=logTranslations[navLang]||logTranslations.en;$(window).on("load",async function(){if(-1!=location.href.indexOf("#")){var e=location.href.substr(location.href.indexOf("#")+1);"debug=1"==e&&(debug=!0,setTimeout(function(){log("DEBUG mode enabled","[DEBUG]")},0))}if(navLang in translations)for(var[t,o]of Object.entries(translations[navLang]))$("#"+t).html(o);else for(var[t,o]of Object.entries(translations.en))$("#"+t).html(o);if($("#applyChatId").on("click",async function(){sendCommand("/select "+$("#selectChatId").val())}),$("#removeChatId").on("click",async function(){sendCommand("/select 0")}),$("#autoStart").on("change",updateBotSettings),$("#logAllMsg").on("change",updateBotSettings),$("#parseMode").on("change",updateBotSettings),$("#wpPreview").on("change",updateBotSettings),$("#ufUpdAnalyzer").on("change",updateBotSettings),$("#sendAll").on("change",updateBotSettings),$("#consoleCommandsGo").click(function(){var e=$("#consoleCommands");e.val().replace(/\\n/g,"\n");lastCommand=e.val(),sendCommand(e.val()),e.val("")}),$("#consoleCommands").focus(async function(){$("#consoleCommandsContainer").css("background","rgb(15, 15, 15)")}),$("#consoleCommands").keyup(async function(){}),$("#consoleCommands").blur(async function(){$("#consoleCommandsContainer").css("background","#000")}),$("#consoleCommands").keyup(async function(e){var t=Math.round((new Date).getTime()/1e3);t-cActionTime>5&&(sendChatAction(selectedChatId,"typing"),cActionTime=t),13==e.keyCode?($("#consoleCommandsGo").click(),cActionTime=0):38==e.keyCode&&$(this).val(lastCommand)}),$("#startBot").click(function(){botToken=$("#token").val(),""!=botToken&&botToken?($("#startBot").prop("disabled",!0),log(l.startingBot,"[INFO]","blue-text"),updateAnalyzer()):log(l.emptyToken,l.logError,"red-text")}),$("#stopBot").click(async function(){started="stop",$("#stopBot").prop("disabled",!0),log(l.stopSent,"[INFO]","yellow-text")}),$("#commands").blur(async function(){updateCommands(!0)}),$("#updateCommands").click(updateCommands),"commands"in cookies?($("#commands").val(cookies.commands),-1!==cookies.commands.indexOf("///////////")&&($("#commands").val($("#commands").val().split("///////////").join("\n")),updateCommands())):$("#commands").val("/start > Messaggio di avvio!;\n/help > Menù di aiuto!;"),"botToken"in cookies&&($("#token").val(cookies.botToken),botToken=$("#token").val()),"botSettings"in cookies){var a=JSON.parse(cookies.botSettings);"parseMode"in a&&$("#parseMode").val(a.parseMode),"wpPreview"in a&&$("#wpPreview").val(a.wpPreview),"autoStart"in a&&($("#autoStart").prop("checked",a.autoStart),1==a.autoStart&&setTimeout(function(){log(l.autoStart,"[INFO]","yellow-text"),""!=botToken&&botToken?$("#startBot").click():(log(l.emptyToken,l.logError,"red-text"),$("#autoStart").prop("checked",!1),updateBotSettings())},0)),"logAllMsg"in a&&$("#logAllMsg").prop("checked",a.logAllMsg),"knownChatIDs"in a&&(knownChatIDs=JSON.parse(a.knownChatIDs)),"ufUpdAnalyzer"in a&&$("#ufUpdAnalyzer").prop("checked",a.ufUpdAnalyzer),"sendAll"in a&&$("#sendAll").prop("checked",a.sendAll),"selectedChatId"in a&&0!=a.selectedChatId&&setTimeout(async function(){selectedChatId=a.selectedChatId,!selectedChatId in knownChatIDs?request("getChat",{
chat_id:selectedChatId},function(e){},async function(e){var t=JSON.parse(e.responseText),o=t.error_code;t.description;log(403==o?l.userDidntStartBot:l.unknownError+JSON.stringify(t),l.logError,"red-text"),selectedChatId=""}):log(l.autoSelectCID1+knownChatIDs[selectedChatId]+l.autoSelectCID2,"[INFO]","yellow-text")},0)}M.updateTextFields(),$("#commands").css("height","auto"),setTimeout(function(){M.textareaAutoResize($("#commands"))},200),$(".tooltipped").tooltip(),$("select").formSelect(),$(".modal").modal(),updateCommands(!1)});