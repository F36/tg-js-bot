"use strict";(function(){function e(e,o){var t=e.split(o);return e=e.substr(t[0].length+o.length),[t[0],e]}function o(e,o,t){for(var a,n=0;n<e.length;n++)a=new RegExp(e[n],"g"),t=t.replace(a,o[n]);return t}async function t(e,o="[INFO]",t="white-text"){var a=$("#console"),n=$("<span>");n.attr("class",t),""!=o&&(o+=" "),n.html(o+e),a.append(n),a.append("<br>"),a.scrollTop(a[0].scrollHeight-a.height())}async function a(o=!0){$("#updateCommands").prop("disabled",!0),o&&t(B.updatingCommands,"[INFO]","yellow-text"),v={};var a=$("#commands").val(),n=a.split(/;$/gm);for(var r of n){"\n"===r.charAt(0)&&(r=r.substr(1));var s=e(r," > "),i=0==s[1].indexOf("photo "),l=s[1].split(/\n/),d=l[l.length-1];if(i){s[1]=e(s[1],"photo ")[1];var c="";s[1].indexOf("\n")-1<s[1].length&&(c=e(s[1],"\n")[1])!==d&&-1===d.indexOf("[[[")&&(s[1]=e(s[1],c)[0])}var m=[];if(0===d.indexOf("[[[")){m={inline_keyboard:[]},k&&t("Building inline keyboard","[DEBUG]");for(var p=/\[?(,? ?\[?(,? ?\[(.*?)-(.*?)\]?)\])\]?/g,u=0;b=p.exec(d);){var g={text:b[3],callback_data:b[4]};k&&t("Pushing <code>"+JSON.stringify(g)+"</code> into the keyboard array.","[DEBUG]"),0===b[1].indexOf(", [[")||0===b[1].indexOf(",[[")||0===b[1].indexOf("[[")?(m.inline_keyboard.push([g]),u++):m.inline_keyboard[u-1].push(g)}k&&t("Inline keyboard built.","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}else if(0===d.indexOf("(((")){u=0;m={keyboard:[]},k&&t("Building traditional keyboard","[DEBUG]");for(p=/\(?(,? ?\(?(,? ?\((.*?)\)?)\))\)?/g;b=p.exec(d);){g={text:b[3]};k&&t("Pushing <code>"+JSON.stringify(g)+"</code> into the keyboard array.","[DEBUG]"),0===b[1].indexOf(", ((")||0===b[1].indexOf(",((")||0===b[1].indexOf("((")?(m.keyboard.push([g]),u++):m.keyboard[u-1].push(g)}(d.endsWith(",true")||d.endsWith(", true"))&&(m.one_time_keyboard=!0,k&&t("One time keyboard detected")),k&&t("Keyboard built.","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}else if(0===d.indexOf("()")){var b;m={remove_keyboard:!0},k&&t("Remove keyboard put into reply_markup","[DEBUG]"),s[1]=s[1].substring(0,s[1].lastIndexOf("\n"))}s[0]in v?v[s[0]].push(i?[s[1],"photo",c]:[s[1],"text",m]):v[s[0]]=i?[[s[1],"photo",c]]:[[s[1],"text",m]]}localStorage.setItem("commands",$("#commands").val()),o&&t(B.updatedCommands,"[INFO]","green-text"),$("#updateCommands").prop("disabled",!1)}function n(e){return $("<div>").text(e).html()}async function r(){p("getUpdates",{offset:h},async function(e){var a={};if("stop"==y)return $("#startBot").prop("disabled",!1),t(B.botStopped,"[INFO]","blue-text"),y=0,!0;setTimeout(r,$("#ufUpdAnalyzer").prop("checked")?0:500),e.result!==[]&&e.result&&e.result.length>0&&(k&&(t("Received update "+n(JSON.stringify(e)),"[DEBUG]"),w=(new Date).getTime(),t("Start Time: "+w,"[DEBUG]")),a=e.result[0],h=a.update_id,i(a),h++),0==y&&(localStorage.setItem("botToken",$("#token").val()),t(B.botStarted,"[INFO]","blue-text"),t(B.helpCmd),$("#stopBot").prop("disabled",!1),p("getMe",{},async function(e){g=e.result,C=g.username;var a=["{BOTNAME}","{TMEBOTUSERNAME}"],r=[n(g.first_name),'<a href="https://t.me/'+C+'">@'+C+"</a>"];t(o(a,r,B.botInfo))}),y=1)},async function(e){var o=e.responseText,a=JSON.parse(e.responseText),n="Errore sconosciuto";403==a.error_code||404==a.error_code?n=B.wrongToken:409==a.error_code&&(n=B.conflict),t(B.connectionError+o+"<br />"+n,B.logError,"red-text"),$("#stopBot").prop("disabled",!0),$("#startBot").prop("disabled",!1),y=0})}async function s(){if(""!=b&&b){if(k){t("Updating bot settings...","[DEBUG]");var e=(new Date).getTime()}localStorage.setItem("botSettings",JSON.stringify({parseMode:$("#parseMode").val(),wpPreview:$("#wpPreview").val(),autoStart:$("#autoStart").prop("checked"),logAllMsg:$("#logAllMsg").prop("checked"),ufUpdAnalyzer:$("#ufUpdAnalyzer").prop("checked"),selectedChatId:T,knownChatIDs:JSON.stringify(E)})),k&&t("Updated bot settings<br />Response time: "+((new Date).getTime()-e)+"ms","[DEBUG]")}}async function i(e){var a,r,s,i,u="",g=0,h="",f=!1,y=0;if(k&&t("Analysing update: "+n(JSON.stringify(e)),"[DEBUG]"),"message"in e){if(A=e.message,!("chat"in A))return t(B.messageNotSupported,"[WARNING]","yellow-text"),!1;if(g=A.chat.id,"title"in A.chat&&(r=A.chat.title,f=!0),"from"in A&&("first_name"in A.from?(i=A.from.first_name,h=i):i="","last_name"in A.from?(s=A.from.last_name,h+=" "+s):s="",y="id"in A.from?A.from.id:0),a=void 0!==r?r:h,"text"in A)u="/"==A.text.charAt(0)?A.text.replace("@"+C,""):A.text;else if("photo"in A){var S=A.photo[A.photo.length-1].file_id,M=A.caption;(T==g||$("#logAllMsg").prop("checked"))&&p("getFile",{file_id:S},async function(e){var o="https://api.telegram.org/file/bot"+b+"/"+e.result.file_path;t('<span class="sentImg"><img src="'+o+'"><br>'+(M||"")+"</span>","["+(f?n(r)+": ":"")+n(h)+"]",T==g?"yellow-text":"white-text")},async function(e){e.responseText&&t(e.responseText,B.logError,"red-text")}),u=""}}else if("callback_query"in e){var x=e.callback_query,I=x.data,A=x.message,N=x.id,_=x.from;y=_.id;"first_name"in _&&(i=_.first_name),h=i,"last_name"in _&&(s=_.last_name,h+=" "+s),g=x.message.chat.id,a=void 0!==r?r:h,u=I,l(N),k&&t("Callback Data: "+I,"["+n(h)+"]",T==y?"yellow-text":"white-text")}else u=B.messageNotSupported;T!=g&&!$("#logAllMsg").prop("checked")||void 0!==I||u&&t(n(u),"["+(f?n(r)+": ":"")+n(h)+"]",T==g?"yellow-text":"white-text"),E[g]=a;var O=["{CHATID}","{USERID}","{CHATTITLE}","{NAME}","{FIRSTNAME}","{LASTNAME}","{MSGTEXT}","{HTMLESCAPEDMSGTEXT}"],D=[g,y,"HTML"==$("#parseMode").val()?n(a):a,"HTML"==$("#parseMode").val()?n(h):h,"HTML"==$("#parseMode").val()?n(i):i,"HTML"==$("#parseMode").val()?n(s):s,u,n(u)];if("/fileid"==M&&d(g,"FileID: <code>"+S+"</code>",{},!1,"HTML"),u in v&&""!=u)for(var U of v[u])if("text"==U[1]){var H=o(O,D,U[0]);k&&t("Text to send: "+n(H),"[DEBUG]");var G={};2 in U&&(G=U[2]),void 0!==I?c(g,H,x.message.message_id,G):d(g,H,G)}else if("photo"==U[1]){M="";2 in U&&(M=o(O,D,U[2]),k&&t("Caption to send: "+n(M),"[DEBUG]")),m(g,U[0],M)}if("any"in v&&void 0===I)for(var U of v.any)if("text"==U[1]){H=o(O,D,U[0]);k&&t("Text to send: "+n(H),"[DEBUG]"),d(g,H)}else if("photo"==U[1]){M="";2 in U&&(M=o(O,D,U[2]),k&&t("Caption to send: "+n(M),"[DEBUG]")),m(g,U[0],M)}k&&t("Response Time: "+((new Date).getTime()-w)+"ms","[DEBUG]")}async function l(e,o,t){var a={callback_query_id:e,text:o,show_alert:t};p("answerCallbackQuery",a)}async function d(e,o,a={},n=!1,r=!1,s=!1){if(r||(r=$("#parseMode").val()),s||(s=$("#wpPreview").val()),null!=e&&""!=e||e){var i={chat_id:e,text:o,parse_mode:r,disable_web_page_preview:s,reply_markup:JSON.stringify(a)};return p("sendMessage",i,async function(o){n&&t(o.result.text,"["+B.messageSent+(e in E?E[e]:e)+"]","green-text")},async function(e){var o=e.responseText;t(B.sendMessageError+o,B.logError,"red-text")},!0),!0}return!1}async function c(e,o,a,n={},r=!1,s=!1,i=!1){if(s||(s=$("#parseMode").val()),i||(i=$("#wpPreview").val()),!(null!=e&&""!=e||e))return!1;var l={chat_id:e,text:o,parse_mode:s,message_id:a,disable_web_page_preview:i,reply_markup:JSON.stringify(n)};p("editMessageText",l,async function(){},async function(e){var o=e.responseText;t(B.sendMessageError+o,B.logError,"red-text")},!0)}async function m(e,o,a="",n=!1,r=!1,s=!1){r||(r=$("#parseMode").val()),s||(s=$("#wpPreview").val());var i={chat_id:e,photo:o,caption:a,parse_mode:r=r,disable_web_page_preview:s};p("sendPhoto",i,async function(a){n&&p("getFile",{file_id:o},async function(o){var a="https://api.telegram.org/file/bot"+b+"/"+o.result.file_path;t('<span class="sentImg"><img src="'+a+'"></span>',"["+B.messageSent+": "+(e in E?E[e]:e)+"]","green-text")},async function(e){e.responseText&&t(e.responseText,B.logError,"red-text")})},async function(e){var o=e.responseText;t(B.sendMessageError+o,B.logError,"red-text")},!0)}async function p(e,o={},t=async function(){},a=async function(){},n=!0){$.ajax({url:"https://api.telegram.org/bot"+b+"/"+e,async:n,method:"POST",data:o,dataType:"json",success:t,error:a})}async function u(o){if(""!=b&&b&&1==y)switch(e(o," ")[0]){case"/help":t(B.helpConsoleCommands,"");break;case"/select":var a=e(o," ");if(1 in a&&a[1])T=a[1],t(0==T?B.removedChatIdSelection:B.selected+T+"!","[INFO]","green-text"),s();else if($.isEmptyObject(E))t(B.noKnownChats,B.logError,"red-text");else{var r="";for(var i in E)r+='<option value="'+i+'"'+(i==T?" selected":"")+">"+n(E[i])+"</option>";$("#selectChatId").html(r).formSelect(),$("#selectChatIdModal").modal("open")}break;default:"/"==o.charAt(0)?t(B.unknownCommand,B.logError,"red-text"):0!=T?(o=o.replace(/\\n/g,"\n"),o.replace(new RegExp(" ","g"),"").length>0?o.length<=4096?d(T,o,{},!0):t(B.messageTooLong,B.logError,"red-text"):t(B.emptyMessage,B.logError,"red-text")):t(B.noChatSelected,B.logError,"red-text")}else t(B.consoleBotNotStarted,B.logError,"red-text")}var r,g,b="",h=-1,f=localStorage,v={},y=0,T=0,S="",C="",E={},k=!1,w=0,x={"it-IT":{startingBot:"Avviando il bot... Connessione in corso ai server telegram...",emptyToken:"Bot non avviato! Bot token vuoto!",stopSent:"Richiesta di arresto inviata!",autoStart:"Bot in avvio secondo le tue impostazioni...",userDidntStartBot:"L'utente selezionato precedentemente ha bloccato il bot o non lo ha mai avviato.",unknownError:"Errore sconosciuto: ",autoSelectCID1:"Selezionata chat ",autoSelectCID2:" come da sessione precedente.",updatingCommands:"Aggiornamento lista comandi in corso...",updatedCommands:"Aggiornamento lista comandi completato!",botStopped:"Bot arrestato!",botStarted:"Bot avviato! Attenzione: Se chiudi questa pagina, verrà anche arrestato il tuo bot!",helpCmd:"/help per i comandi della console.",botInfo:"Info Bot:<br>Nome: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Token errato o non valido",conflict:"Conflitto, il bot ha il webhook già settato, oppure qualche altro programma è sul bot",connectionError:"Errore nella connessione: ",messageNotSupported:"Messaggio non supportato",sendMessageError:"Errore nell'invio del messaggio: ",helpConsoleCommands:"Menù comandi:<br />/help: visualizza questo menù di aiuto<br />/select: GUI per selezionare la chat in cui inviare i messaggi<br />&lt;messaggio&gt;: invia messaggio nella chat_id selezionata",removedChatIdSelection:"Rimossa selezione chat_id!",selected:"Selezionato ",noKnownChats:"Nessun chat_id conosciuto. Impossibile mostrare la GUI. Seleziona un chat_id manualmente con /select &lt;chat_id&gt;",unknownCommand:"Comando sconosciuto. /help per una lista completa di comandi.",messageTooLong:"Messaggio troppo lungo. Caratteri massimi consentiti: 4096 caratteri.",emptyMessage:"Messaggio nullo.",noChatSelected:"Per favore, prima di tentare di inviare un messaggio, usa /select",consoleBotNotStarted:'Prima di scrivere comandi, perfavore, metti il token del bot. Se lo hai già fatto, assicurati di aver avviato il bot cliccando il pulsante "Avvia"',messageSent:"Messaggio inviato: ",logError:"[ERRORE]"},en:{startingBot:"Starting the bot... Connecting to telegram servers...",emptyToken:"Bot not started! Bot token empty!",stopSent:"Stop request sent!",autoStart:"Starting the bot according to your settings...",userDidntStartBot:"The user previously selected has blocked the bot or he hasn't started it at all.",unknownError:"Unknown error: ",autoSelectCID1:"Selected chat ",autoSelectCID2:" as previous session.",updatingCommands:"Updating commands list...",updatedCommands:"Commands list updated!",botStopped:"Bot stopped!",botStarted:"Bot started! Warning: If you close this page, your bot will be stopped too!",helpCmd:"/help for the console commands.",botInfo:"Bot Info:<br>Name: {BOTNAME}<br>Username: {TMEBOTUSERNAME}",wrongToken:"Wrong token or token not valid",conflict:"Conflict, the bot has already setted webhook, or some other program is on the bot",connectionError:"Connection error: ",messageNotSupported:"Messsage not supported",sendMessageError:"Message sending error: ",helpConsoleCommands:"Commands menù:<br />/help: shows this help menu<br />/select: GUI to select chat to send messages in<br />&lt;messaggio&gt;: send message in selected chat",removedChatIdSelection:"Removed chat_id selection!",selected:"Selected ",noKnownChats:"No known chat_id. Unable to show the GUI. Select a chat_id manually with /select &lt;chat_id&gt;",unknownCommand:"Unknown command. /help for a commands list.",messageTooLong:"Message too long. Maximum allowed characters: 4096 characters.",emptyMessage:"Message empty.",noChatSelected:"Please, before trying to send a message, use /select",consoleBotNotStarted:'Before typing commands, enter the bot token. If you have already done it, make sure you\'ve clicked the "Start" button',messageSent:"Message sent",logError:"[ERROR]"}},I={"it-IT":{commandsHelpTr:"/comando > Risposta<strong>;</strong><br>      Nella risposta, puoi usare <strong>photo</strong> seguito da un <strong>file_id/url</strong> (per mettere la descrizione alla foto, vai a capo) per inviare una foto, o un semplice testo per inviare una risposta testuale.<br>      Saranno aggiunti altri tipi di documenti/video presto.<br>      Per ricevere il file_id di una foto, manda una foto al tuo bot con descrizione /fileid      <br><br>      Nella risposta testuale puoi usare i seguenti codici:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>      <br>      <code>{CHATID}</code>: ID della chat<br>      <code>{USERID}</code>: ID utente<br>      <code>{CHATTITLE}</code>: Nel caso di un gruppo, il nome del gruppo, altrimenti il nome completo dell'utente<br>      <code>{NAME}</code>: Nome completo dell'utente<br>      <code>{FIRSTNAME}</code>: Nome dell'utente<br>      <code>{LASTNAME}</code>: Cognome dell'utente<br>      <code>{MSGTEXT}</code>: Testo messaggio inviato.<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Testo messaggio inviato escapato da HTML.      <br><br>      Mettendo <code>any</code> come comando, questo risponderà ad ogni comando.      <br><br>      Puoi usare le tastiere inline mettendo sull'ultima linea della risposta al tuo comando <strong>[[[BOTTONE-COMANDO]]]</strong> e, una virgola prima dell'ultima parentesi quadra per mettere un altro bottone sull'altra linea della tastiera inline.      <br><code>[[[Bottone1-comando1]],[[Bottone2-comando2]]]</code>      <br>oppure, una virgola sulla parentesi direttamente successiva a COMANDO per un bottone sulla stessa linea      <br><code>[[[Bottone-comando],[Sono sulla stessa linea!-comando2]]]</code>      <br>Per rispondere ad un bottone cliccato, metti il callback data messo nel bottone come un normale comando      <code>comando1 > risposta1;</code> Il messaggio sarà modificato con risposta1      <br><br>Esempio pratico:<br>      <code>/start > Ciao! Clicca uno dei bottoni qui sotto:      <br>[[[Cosa fai?-//help],[Come sei stato creato?-//creato]],[[Ciao!-//saluto]]];      <br>//help > Non faccio niente :);      <br>//creato > Sono stato creato con EasyJSBot!;      <br>//saluto > Ciao!;</code><br><br>      <br>Puoi anche usare le tastiere tradizionali, la sintassi è (((RISPOSTA))) come con le tastiere inline, puoi ordinarle come vuoi:      <br><code>(((Ciao),(Come va?)))</code>: Ciao e Come va? saranno sulla stessa linea       <br><code>(((Ciao)),((Come va?)))</code>: Ciao e Come va? Saranno questa volta su linee diverse      <br>Facendo così, creerai una tastiera permanente, che si può rimuovere mettendo sulla risposta () che rimuoverà la tastiera      <br>Oppure, per rimuoverla senza farla rimuovere nella risposta, potrai mettere \", true\" alla fine delle parentesi <code>(((Ciao))), true</code> che creerà una      \"one time keyboard\" cioè, una tastiera che verrà rimossa automaticamente al click del bottone.","tr-botToken":"Token del bot","tr-botcommands":"Comandi del bot",startBot:"Avvia!",stopBot:"Arresta","tr-autostart":"Avvia automaticamente il bot al caricamento della pagina","tr-logallmsg":"Logga i messaggi da qualsiasi chat","tr-createdby":"Creato da Pato05 <code>:)</code>","tr-cmdHelpTitle":"Help comandi",selectChId:"Seleziona la chat_id",removeChatId:"Rimuovi selezione"},en:{"tr-botToken":"Bot Token","tr-botcommands":"Bot commands",startBot:"Start!",stopBot:"Stop","tr-autostart":"Automatically start the bot at page load","tr-logallmsg":"Log messages from every chat","tr-createdby":"Created by Pato05 <code>:)</code>","tr-cmdHelpTitle":"Commands Help",selectChId:"Select the chat_id",removeChatId:"Remove selection",commandsHelpTr:"/command > Answer<strong>;</strong><br>      In the answer, you can use <strong>photo</strong> followed by <strong>file_id/url</strong> (to put the caption to a photo, start a new line) to send a photo, or a simple text to send a textual answer.<br>      Will be added new types of documents/videos soon<br>      To get a photo file_id, send a photo to your active bot with caption /fileid      <br><br>      In the textual answer or caption you can use these codes:<br>      <code>{CHATID}</code>, <code>{USERID}</code>, <code>{CHATTITLE}</code>, <code>{NAME}</code>, <code>{FIRSTNAME}</code>, <code>{LASTNAME}</code>, <code>{MSGTEXT}</code>, <code>{HTMLESCAPEDMSGTEXT}</code>      <br>      <code>{CHATID}</code>: Chat ID<br>      <code>{USERID}</code>: User ID<br>      <code>{CHATTITLE}</code>: In the case of a group, the group title, else the complete user's name<br>      <code>{NAME}</code>: Complete user's name<br>      <code>{FIRSTNAME}</code>: User's first name<br>      <code>{LASTNAME}</code>: User's last name<br>      <code>{MSGTEXT}</code>: Text of the message sent by the user<br>      <code>{HTMLESCAPEDMSGTEXT}</code>: Text of the message sent by the user HTML escaped.      <br><br>      Putting <code>any</code> as command, it will answer to each message.      <br><br>      You can use inline keyboards by putting at the end of your answer <strong>[[[BUTTON-COMMAND]]]</strong> and, a virgola before the last bracket to put a button on a new line.      <br><code>[[[Button1-command1]],[[Button2-Command2]]]</code>      <br>or, a virgola after the bracket directly next at COMMAND for a button on the same line      <br><code>[[[Button-command],[I'm on the same line!-command2]]]</code>      <br>To answer a clicked button, put your button command like a normal command      <code>command1 > answer1;</code> The message will be edited with answer1      <br><br>Pratical example:<br>      <code>/start > Hello! Click one of the buttons below:      <br>[[[What do you do?-//help],[How have you been created?-//created]],[[Hi!-//greeting]]];      <br>//help > I don't do nothing :);      <br>//created > I have been created with EasyJSBot!;      <br>//greeting > Hello there!;</code><br><br>      <br>You can use traditional keyboards too, the syntax is (((ANSWER))) and, like as inline keyboards, you can order them as you wish:      <br><code>(((Hello),(How are you?)))</code>: Hello and How are you? will be on the same line      <br><code>(((Ciao)),((Come va?)))</code>: Hello and How are you? will now be on different lines      <br>Doing that you'll create a permanent keyboard, that can be removed with () in the last line of the answer      <br>Or, to remove it without doing it in the answer, if you put \", true\" at the end of the brackets <code>(((Ciao))), true</code> it will create a      \"one time keyboard\", a keyboard that will be removed when a button is clicked."}},A=navigator.userLanguage||navigator.language,B=x[A]||x.en;$(document).ready(async function(){if(-1!=location.href.indexOf("#")){var e=location.href.substr(location.href.indexOf("#")+1);"debug=1"==e&&(k=!0,setTimeout(function(){t("DEBUG mode enabled","[DEBUG]")},0))}if(A in I)for(var[o,n]of Object.entries(I[A]))$("#"+o).html(n);else for(var[o,n]of Object.entries(I.en))$("#"+o).html(n);if($("#applyChatId").on("click",async function(){u("/select "+$("#selectChatId").val())}),$("#removeChatId").on("click",async function(){u("/select 0")}),$("#autoStart").on("change",s),$("#logAllMsg").on("change",s),$("#parseMode").on("change",s),$("#wpPreview").on("change",s),$("#ufUpdAnalyzer").on("change",s),$("#consoleCommandsGo").click(function(){var e=$("#consoleCommands");e.val().replace(/\\n/g,"\n");S=e.val(),u(e.val()),e.val("")}),$("#consoleCommands").focus(async function(){$("#consoleCommandsContainer").css("background","rgb(15, 15, 15)")}),$("#consoleCommands").blur(async function(){$("#consoleCommandsContainer").css("background","#000")}),$("#consoleCommands").keyup(async function(e){13==e.keyCode?$("#consoleCommandsGo").click():38==e.keyCode&&$(this).val(S)}),$("#startBot").click(function(){b=$("#token").val(),""!=b&&b?($("#startBot").prop("disabled",!0),t(B.startingBot,"[INFO]","blue-text"),r()):t(B.emptyToken,B.logError,"red-text")}),$("#stopBot").click(async function(){y="stop",$("#stopBot").prop("disabled",!0),t(B.stopSent,"[INFO]","yellow-text")}),$("#commands").blur(async function(){a(!0)}),$("#updateCommands").click(a),"commands"in f?($("#commands").val(f.commands),-1!==f.commands.indexOf("///////////")&&($("#commands").val($("#commands").val().split("///////////").join("\n")),a())):$("#commands").val("/start > Messaggio di avvio!;\n/help > Menù di aiuto!;"),"botToken"in f&&($("#token").val(f.botToken),b=$("#token").val()),"botSettings"in f){var i=JSON.parse(f.botSettings);"parseMode"in i&&$("#parseMode").val(i.parseMode),"wpPreview"in i&&$("#wpPreview").val(i.wpPreview),"autoStart"in i&&($("#autoStart").prop("checked",i.autoStart),1==i.autoStart&&setTimeout(function(){t(B.autoStart,"[INFO]","yellow-text"),""!=b&&b?$("#startBot").click():(t(B.emptyToken,B.logError,"red-text"),$("#autoStart").prop("checked",!1),s())},0)),"logAllMsg"in i&&$("#logAllMsg").prop("checked",i.logAllMsg),"knownChatIDs"in i&&(E=JSON.parse(i.knownChatIDs)),"ufUpdAnalyzer"in i&&$("#ufUpdAnalyzer").prop("checked",i.ufUpdAnalyzer),"selectedChatId"in i&&0!=i.selectedChatId&&setTimeout(async function(){T=i.selectedChatId,!T in E?p("getChat",{chat_id:T},function(e){},async function(e){var o=JSON.parse(e.responseText),a=o.error_code;o.description;t(403==a?B.userDidntStartBot:B.unknownError+JSON.stringify(o),B.logError,"red-text"),T=""}):t(B.autoSelectCID1+E[T]+B.autoSelectCID2,"[INFO]","yellow-text")},0)}setTimeout(function(){M.updateTextFields(),M.textareaAutoResize($("#commands")),$(".tooltipped").tooltip(),$("select").formSelect(),$(".modal").modal()},0),a(!1)})})();